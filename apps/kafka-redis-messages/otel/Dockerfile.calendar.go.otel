# Unless explicitly stated otherwise all files in this repository are licensed
# under the Apache 2.0 License.
#
# Multi-stage build for the Go Kafka consumer (OTel variant).
FROM golang:1.22 AS builder

WORKDIR /app
COPY calendar-consumer-go-otel calendar/

WORKDIR /app/calendar
RUN go mod download
RUN CGO_ENABLED=0 go build -o /calendar

FROM gcr.io/distroless/static-debian12:nonroot
COPY --from=builder /calendar /calendar

CMD [ "/calendar" ]
